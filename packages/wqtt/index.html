<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="icon" href="data:,">
  <title>wqtt example</title>
</head>
<body>
  <div>
    <button onclick="connect()">connect</button>
    <button onclick="disconnect()">disconnect</button>
  </div>
  <ul id="events">
  </ul>

<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-polyfill/6.26.0/polyfill.min.js"></script>
<script src="dist/wqtt.js"></script>
<script>
const client = new wqtt.Client({
  host: 'localhost',
  port: 8080,
  packetsend(buffer) {
    logEvent('packetsend', buffer);
  },
  packetreceive(buffer) {
    logEvent('packetreceive', buffer);
  },
  connack(packet) {
    logEvent('connack', JSON.stringify(packet));
  },
});

function connect() {
  client.connect();
}

function disconnect() {
  client.disconnect();
}

function logEvent(type, msg) {
  const li = document.createElement('li');
  li.textContent = `${type}: ${msg}`;
  document.all.events.appendChild(li);
}
</script>
</body>
</html>
